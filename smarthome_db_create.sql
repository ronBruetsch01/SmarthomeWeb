/*
 * Legt die smarthome-DB komplett neu an.
 *	--> Löscht alle Datenbestände!!!
 * DB vorher anlegen. 
 * */

 DROP DATABASE IF EXISTS smarthome;
 CREATE DATABASE smarthome;
 USE smarthome;
 
###### Tabellen anlegen #########################################
DROP TABLE IF EXISTS `sensor`;

CREATE TABLE `sensor` (
  `sen_id` int NOT NULL,
  `sen_raum` varchar(45) NOT NULL,
  `sen_ip` varchar(45) NOT NULL,
  PRIMARY KEY (`sen_id`)
) ;

##

DROP TABLE IF EXISTS `werte`;

CREATE TABLE `werte` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `sen_id` int NOT NULL,
  `luftdruck` double NOT NULL,
  `luftfeuchte` double NOT NULL,
  `temperatur` double NOT NULL,
  `datum` datetime NOT NULL,
  PRIMARY KEY (`ID`)
) ;


###### Referenzen setzen (PK-FK-Beziehung) #########################################

ALTER TABLE `werte` 
ADD CONSTRAINT `fk_wert_sens`
  FOREIGN KEY (`sen_id`)
  REFERENCES `sensor` (`sen_id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;



##### Werte eintragen ##########################################
INSERT INTO `sensor` VALUES (1,'Wohnzimmer','192.168.1.145'),(2,'Balkon','192.168.1.40'),(3,'Garage','192.168.1.187'),(4,'Küche','192.168.1.69'),(5,'Bad','192.168.1.31'),(58,'Keller','192.168.1.33') ,(31,'Treppenhaus','192.168.1.133'),(12,'Eingang','192.168.1.36');
INSERT INTO `werte` VALUES (1,4,1014,55,31.86,'2022-06-26 15:57:12'),(2,3,1000,53,31.87,'2022-06-26 15:57:14'),(3,3,987,52,31.88,'2022-06-26 15:57:16'),(4,31,973,50,31.9,'2022-06-26 15:57:18'),(5,1,1079,49,31.91,'2022-06-26 15:57:20'),(6,4,1045,70,32.25,'2022-06-26 15:57:22'),(7,2,1056,37,31.7,'2022-06-26 15:57:24'),(8,2,1042,36,31.71,'2022-06-26 15:57:26'),(9,1,1028,34,31.73,'2022-06-26 15:57:28'),(10,1,1015,33,31.74,'2022-06-26 15:57:30'),(11,4,1001,31,32.75,'2022-06-26 15:57:32'),(12,3,987,30,31.77,'2022-06-26 15:57:34'),(13,3,973,29,31.78,'2022-06-26 15:57:36'),(14,2,1080,27,31.8,'2022-06-26 15:57:38'),(15,3,996,37,32.47,'2022-06-26 15:57:40'),(16,4,1032,46,32.15,'2022-06-26 15:57:42'),(17,3,1018,79,32.12,'2022-06-27 12:18:56'),(18,2,1005,78,32.13,'2022-06-27 12:18:58'),(100,2,1071,39,22.06,'2022-10-05 12:33:27'),(101,2,1058,39,22.07,'2022-10-05 12:33:29'),(102,1,1044,38,22.09,'2022-10-05 12:33:31'),(103,1,1030,37,21.1,'2022-10-05 12:33:33'),(104,4,1017,37,22.11,'2022-10-05 12:33:35'),(105,3,1003,36,22.13,'2022-10-05 12:33:37'),(106,3,989,35,22.14,'2022-10-05 12:33:39'),(107,2,975,64,22.15,'2022-10-05 12:33:41'),(108,2,1082,64,22.17,'2022-10-05 12:33:43'),(109,2,998,39,21.84,'2022-10-05 12:33:45'),(110,2,984,38,21.86,'2022-10-05 12:33:47'),(111,1,971,37,21.87,'2022-10-05 12:33:49'),(112,1,1077,36,21.88,'2022-10-05 12:33:51'),(113,4,1063,36,21.9,'2022-10-05 12:33:53'),(114,3,1049,35,21.91,'2022-10-05 12:33:55');
